<!DOCTYPE html>
<html>

<head>
    <script src="js/jquery-3.6.0.min.js"></script>
    <link rel="stylesheet" href="css/bootstrap.css">
    <script src="js/bootstrap.js"></script>
    <style>
        .my-custom-scrollbar {
            position: relative;
            height: 600px;
            overflow: auto;
        }

        .table-wrapper-scroll-y {
            display: block;
        }
    </style>
</head>

<body>
    <div class="container-fluid" style="margin-top: 100px;">
        <div class="row justify-content-md-center">
            <h1>Anime Fighters Simulator AFK Open Calculator</h1> &nbsp;&nbsp;&nbsp;&nbsp; by d_four
        </div>
        <div class="row">
            <div class="col-4">
                <!-- Left -->
                <div class="table-wrapper-scroll-y my-custom-scrollbar">
                    <table id="costsrc" class="table table-sm">
                        <tr>
                            <th>World</th>
                            <th>Name</th>
                            <th>Star Cost</th>
                            <th>Token Cost</th>
                        </tr>
                        <tr class="trworld">
                            <td><img src="https://tr.rbxcdn.com/591d22418690d4c762afb8bbc1c116dd/150/150/Image/Png"
                                    width="30px">
                            </td>
                            <td class="worldName">Super Island</td>
                            <td class="costtd">80</td>
                            <td class="costMaxtd">21</td>
                        </tr>
                        <tr class="trworld">
                            <td><img src="https://tr.rbxcdn.com/2c915090a107336152de93967f74bff4/150/150/Image/Png"
                                    width="30px"></td>
                            <td class="worldName">Ninja Village</td>
                            <td class="costtd">300</td>
                            <td class="costMaxtd">53</td>
                        </tr>
                        <tr class="trworld">
                            <td><img src="https://tr.rbxcdn.com/b13b29bad076b4d2186799b8b23dd9bc/150/150/Image/Png"
                                    width="30px"></td>
                            <td class="worldName">Crazy Town</td>
                            <td class="costtd">2.5k</td>
                            <td class="costMaxtd">227</td>
                        </tr>
                        <tr class="trworld">
                            <td><img src="https://tr.rbxcdn.com/e43597c02ff9af75fdd57733768787dc/150/150/Image/Png"
                                    width="30px"></td>
                            <td class="worldName">Fruits Island</td>
                            <td class="costtd">10k</td>
                            <td class="costMaxtd">593</td>
                        </tr>
                        <tr class="trworld">
                            <td><img src="https://tr.rbxcdn.com/1aa4fed60c225ba95d2b50b1db47f34c/150/150/Image/Png"
                                    width="30px"></td>
                            <td class="worldName">Hero University</td>
                            <td class="costtd">50k</td>
                            <td class="costMaxtd">1.8k</td>
                        </tr>
                        <tr class="trworld">
                            <td><img src="https://tr.rbxcdn.com/870db5469eccce6323b0fb22a7f1d1ef/150/150/Image/Png"
                                    width="30px"></td>
                            <td class="worldName">Walled City</td>
                            <td class="costtd">250k</td>
                            <td class="costMaxtd">5.51k</td>
                        </tr>
                        <tr class="trworld">
                            <td><img src="https://tr.rbxcdn.com/119c3b15816cebaf4be1a819647672e6/150/150/Image/Png"
                                    width="30px"></td>
                            <td class="worldName">Slayer Army</td>
                            <td class="costtd">800k</td>
                            <td class="costMaxtd">12.3k</td>
                        </tr>
                        <tr class="trworld">
                            <td><img src="https://tr.rbxcdn.com/e509880fb5d2712bb7afff34db49757a/150/150/Image/Png"
                                    width="30px"></td>
                            <td class="worldName">Ghoul Town</td>
                            <td class="costtd">3m</td>
                            <td class="costMaxtd">30.8k</td>
                        </tr>
                        <tr class="trworld">
                            <td><img src="https://tr.rbxcdn.com/9c38d441e6c9ccf4dbc3784c026d7ce5/150/150/Image/Png"
                                    width="30px"></td>
                            <td class="worldName">Chimera Jungle</td>
                            <td class="costtd">10m</td>
                            <td class="costMaxtd">71.1k</td>
                        </tr>
                        <tr class="trworld">
                            <td><img src="https://tr.rbxcdn.com/fabecb3e963f8efaa14efd9d515ee12a/150/150/Image/Png"
                                    width="30px"></td>
                            <td class="worldName">Virtual Castle</td>
                            <td class="costtd">40m</td>
                            <td class="costMaxtd">185k</td>
                        </tr>
                        <tr class="trworld">
                            <td><img src="https://tr.rbxcdn.com/7a9a96d07615282e2bc34ababe80eb29/150/150/Image/Png"
                                    width="30px"></td>
                            <td class="worldName">Empty Dimension</td>
                            <td class="costtd">150m</td>
                            <td class="costMaxtd">464k</td>
                        </tr>
                        <tr class="trworld">
                            <td><img src="https://tr.rbxcdn.com/214692f1e31ad36f515baa9da81b2f04/150/150/Image/Png"
                                    width="30px"></td>
                            <td class="worldName">Cursed High</td>
                            <td class="costtd">500m</td>
                            <td class="costMaxtd">1.07m</td>
                        </tr>
                        <tr class="trworld">
                            <td><img src="https://tr.rbxcdn.com/040a984578d6109da1a9acd67e4e424d/150/150/Image/Png"
                                    width="30px"></td>
                            <td class="worldName">XYZ Metropolis</td>
                            <td class="costtd">1.5b</td>
                            <td class="costMaxtd">2.29m</td>
                        </tr>
                        <tr class="trworld">
                            <td><img src="https://tr.rbxcdn.com/da5fcbc732c07a2f21c4cd5e70004a1a/150/150/Image/Png"
                                    width="30px"></td>
                            <td class="worldName">9 Crimes island</td>
                            <td class="costtd">5b</td>
                            <td class="costMaxtd">5.28m</td>
                        </tr>
                        <tr class="trworld">
                            <td><img src="https://tr.rbxcdn.com/32aae8f01170443510ead07727605b6f/150/150/Image/Png"
                                    width="30px"></td>
                            <td class="worldName">Destiny Island</td>
                            <td class="costtd">20b</td>
                            <td class="costMaxtd">13.8m</td>
                        </tr>
                        <tr class="trworld">
                            <td><img src="https://tr.rbxcdn.com/71bd5618fd1fbf84703a5854c86984d2/150/150/Image/Png"
                                    width="30px"></td>
                            <td class="worldName">Lucky Kingdom</td>
                            <td class="costtd">80b</td>
                            <td class="costMaxtd">36m</td>
                        </tr>
                        <tr class="trworld">
                            <td><img src="https://tr.rbxcdn.com/013dda1f9971b9433ce201835e6bef89/150/150/Image/Png"
                                    width="30px"></td>
                            <td class="worldName">Land Of Alchemy</td>
                            <td class="costtd">250b</td>
                            <td class="costMaxtd">79.5m</td>
                        </tr>
                        <tr class="trworld">
                            <td><img src="https://tr.rbxcdn.com/4384c5c633b993d471030dd7cd582311/150/150/Image/Png"
                                    width="30px"></td>
                            <td class="worldName">Slimey Island</td>
                            <td class="costtd">780b</td>
                            <td class="costMaxtd">174m</td>
                        </tr>
                        <tr class="trworld">
                            <td><img src="https://tr.rbxcdn.com/26fb75d9712a69dcec07191e816c3bd1/150/150/Image/Png"
                                    width="30px"></td>
                            <td class="worldName">Flame City</td>
                            <td class="costtd">2t</td>
                            <td class="costMaxtd">336m</td>
                        </tr>
                        <tr class="trworld">
                            <td><img src="https://tr.rbxcdn.com/e1dbcec32ec674b126db04b969e2d287/150/150/Image/Png"
                                    width="30px"></td>
                            <td class="worldName">Divine Colosseum</td>
                            <td class="costtd">7t</td>
                            <td class="costMaxtd">800m</td>
                        </tr>
                        <tr class="trworld">
                            <td><img src="https://tr.rbxcdn.com/95fa9f90a696c87fe419c073167bdd55/150/150/Image/Png"
                                    width="30px"></td>
                            <td class="worldName">Kingdom Of Four</td>
                            <td class="costtd">20t</td>
                            <td class="costMaxtd">1.65b</td>
                        </tr>
                        <tr class="trworld">
                            <td><img src="https://tr.rbxcdn.com/64c45bf97f2e436ab53188ffbce207b8/150/150/Image/Png"
                                    width="30px"></td>
                            <td class="worldName">Icy Wastes</td>
                            <td class="costtd">65t</td>
                            <td class="costMaxtd">3.75b</td>
                        </tr>
                        <tr class="trworld">
                            <td><img src="https://tr.rbxcdn.com/56818c6130a10d86219691da436dd509/150/150/Image/Png"
                                    width="30px"></td>
                            <td class="worldName">The Underworld</td>
                            <td class="costtd">200t</td>
                            <td class="costMaxtd">8.17b</td>
                        </tr>
                        <tr class="trworld">
                            <td><img src="https://tr.rbxcdn.com/3ac492b63d270a00c856532655ab1e4f/150/150/Image/Png"
                                    width="30px"></td>
                            <td class="worldName">Psychic City</td>
                            <td class="costtd">650t</td>
                            <td class="costMaxtd">18.5b</td>
                        </tr>
                        <tr class="trworld">
                            <td><img src="https://tr.rbxcdn.com/ae70fbea93e25ffafa05026afe1ad012/150/150/Image/Png"
                                    width="30px"></td>
                            <td class="worldName">The Hole</td>
                            <td class="costtd">2q</td>
                            <td class="costMaxtd">40.3b</td>
                        </tr>
                        <tr class="trworld">
                            <td><img src="https://tr.rbxcdn.com/055924f05b61bd0a32b0ca688e0f8ad0/150/150/Image/Png"
                                    width="30px"></td>
                            <td class="worldName">Ninja City</td>
                            <td class="costtd">6q</td>
                            <td class="costMaxtd">86.4b</td>
                        </tr>
                        <tr class="trworld">
                            <td><img src="https://tr.rbxcdn.com/4a8e125a2ccbd7e5d070fbc18944d9fc/150/150/Image/Png"
                                    width="30px"></td>
                            <td class="worldName">Time Travel Tokyo</td>
                            <td class="costtd">20q</td>
                            <td class="costMaxtd">199b</td>
                        </tr>
                        <tr class="trworld">
                            <td><img src="https://tr.rbxcdn.com/10d7c517f7075ca0b185c7e00f1b4f41/150/150/Image/Png"
                                    width="30px"></td>
                            <td class="worldName">Orca Road Prison</td>
                            <td class="costtd">66q</td>
                            <td class="costMaxtd">455b</td>
                        </tr>
                        <tr class="trworld">
                            <td><img src="https://tr.rbxcdn.com/0f2e2fb750ccaa895372d53480bc8c70/150/150/Image/Png"
                                    width="30px"></td>
                            <td class="worldName">World Of Games</td>
                            <td class="costtd">220q</td>
                            <td class="costMaxtd">1.04t</td>
                        </tr>
                        <tr class="trworld">
                            <td>30 </td>
                            <td>TBC</td>
                            <td class="costtd">0</td>
                            <td class="costMaxtd">0</td>
                        </tr>
                    </table>
                </div>



            </div>
            <div class="col-6">
                <!-- Main Area -->
                <div class="row">
                    <!-- Top Bar -->
                </div>
                <div class="row">
                    <!-- spacer --> &nbsp;
                </div>
                <div class="row">
                    <!-- Mid Bar -->
                    <div class="col-6">
                        <!-- Result Area-->
                        <h2 id="info">World name</h2>
                        <h3 id="resdisplay">
                            &larr; Click the world</h3>
                        <h3 id="res2display"></h3>
                        <h3 id="res3display"></h3>
                        <h3 id="res4display"></h3>
                        <h3 id="res5display"></h3>
                        <h3 id="res6display"></h3>
                        <h3 id="res7display"></h3>
                        <h3 id="res8display">Then click get results &darr;</h3>
                    </div>
                    <div class="col-6">
                        <!-- toggle area -->
                        <div class="input-group  mb-3">
                            <div class="input-group-prepend">
                                <span class="input-group-text  bg-info text-white">&#165;
                                    Cost&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                            </div>
                            <input id="inpcost" type="text" aria-label="cost" class="form-control" placeholder="100">
                            <input id="inpmod" type="text" aria-label="mod" class="form-control" placeholder="">
                        </div>

                        <div class="input-group  mb-3">
                            <div class="input-group-prepend">
                                <span class="input-group-text  bg-info text-white">Max Token</span>
                            </div>
                            <input id="inpMaxcost" type="text" aria-label="maxcost" class="form-control"
                                placeholder="10">
                            <input id="maxmod" type="text" aria-label="maxmod" class="form-control" placeholder="">
                        </div>

                        <div class="input-group  mb-3">
                            <div class="input-group-prepend">
                                <span class="input-group-text  bg-info text-white">Opens&nbsp;&nbsp;&nbsp;&nbsp;</span>
                            </div>
                            <select class="form-control" id="opensCount">
                                <option>1</option>
                                <option>2</option>
                                <option>3</option>
                                <option>4</option>
                                <option>5</option>
                                <option>6</option>
                                <option>7</option>
                                <option selected>8</option>
                            </select>
                        </div>

                        <div class="input-group  mb-3">
                            <div class="input-group-prepend">
                                <span class="input-group-text  bg-info text-white">Inv Space</span>
                            </div>
                            <input type="text" class="form-control" id="invSpace" value="1975">
                        </div>

                        <div class="input-group mb-3">
                            <div class="input-group-prepend">
                                <label class="input-group-text  bg-info text-white" for="inputGroupSelect01">Star
                                    Use&nbsp;&nbsp;&nbsp;&nbsp;</label>
                            </div>
                            <select class="custom-select" id="inputGroupSelect01">
                                <option selected value="1">Fuse</option>
                                <option value="2">Sell</option>
                            </select>
                        </div>
                        <div class="input-group mb-3">
                            <div class="input-group-prepend">
                                <label class="input-group-text  bg-info text-white" for="inputGroupSelect02">Fast
                                    Open</label>
                            </div>
                            <select class="custom-select" id="inputGroupSelect02">
                                <option value="1">None</option>
                                <option selected value="2">Owned</option>
                            </select>
                        </div>
                        <div class="input-group mb-3">
                            <div class="input-group-prepend">
                                <label class="input-group-text  bg-info text-white" for="inputGroupSelect03">50k
                                    Badge</label>
                            </div>
                            <select class="custom-select" id="inputGroupSelect03">
                                <option value="1">None</option>
                                <option selected value="2">Owned</option>
                            </select>
                        </div>
                        <div class="input-group mb-3">
                            <div class="input-group-prepend">
                                <label class="input-group-text  bg-info text-white" for="inputGroupSelect05">VIP
                                    Pass&nbsp;&nbsp;</label>
                            </div>
                            <select class="custom-select" id="inputGroupSelect05">
                                <option value="1">None</option>
                                <option selected value="2">Owned</option>
                            </select>
                        </div>
                        <div class="input-group mb-3">
                            <div class="input-group-prepend">
                                <label class="input-group-text  bg-info text-white" for="inputGroupSelect04">Max
                                    Open</label>
                            </div>
                            <select class="custom-select" id="inputGroupSelect04">
                                <option selected value="1">Yes</option>
                                <option value="2">No</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <!-- Bot Bar -->
                    <button id="getres" type="button" class="btn btn-info btn-block">Get Result</button>
                    Values shown are just estimates and do not account for variations due to connection speed or<br>
                    computer performance.<br><br>
                </div>
                <div class="row">
                    <span class="small">Version 1.2 - Updated 17.05.2022</span>
                </div>
                <div class="row">
                    <a href="https://github.com/dfour/afsafk">Source Code</a>
                </div>
            </div>
        </div>
    </div>

    <script>
        /**  TODO
         *  Add hour field
         *  Add time event mod
         * */
        // Control and calculate results here

        // hard vars
        defaultOpenPerHour = 1200   // how many opens an be done in an hour
        defaultMaxOpensPerHour = 40 // how many max opens can be done in a hour
        defaultSellRate = 0.25      // value returned for sell (avg)
        modLetters = " KMTQEZYXWVU"  // modifiers for currency

        // useful functions

        function getCostOfSingleOpen(cps, opens) {
            return cps * opens;
        }

        function getCostOfSingleMaxOpen(cps, invSpace) {
            return cps * invSpace * 0.5;
        }

        function getCostOfHourOpens(cps, opens, gpass, fiftyk, fuseSell, vip) {
            if (vip == 2) {
                cps = cps * 0.75 // 25% discount for VIP
            }

            fc = cps * opens * defaultOpenPerHour * gpass * fiftyk
            if (fuseSell == 2) {
                fc = fc * (1 - defaultSellRate)
            }
            return fc
        }

        function getCostOfHourMaxOpen(cps, invSpace, fuseSell, vip) {

            if (vip == 2) {
                cps = cps * 0.75 // 25% discount for VIP
            }

            fc = cps * defaultMaxOpensPerHour * invSpace
            sellprice = 0
            if (fuseSell == 2) {
                sellprice = fc * defaultSellRate
            }
            return (fc * 0.5) - sellprice
        }

        function convertToFormatted(value, mod) {
            cmodpos = modLetters.indexOf(mod.toUpperCase())
            while (Math.ceil(Math.log10(value + 1)) > 3) {
                cmodpos += 1 // move to next modifier
                value = value * 0.001// divide val by 1000 to mve 3 places down
            }

            return value.toPrecision(3) + modLetters[cmodpos];
        }

        function populateCost(stringVal, maxStringVal) {
            cost = costModConvert(stringVal)
            maxcost = costModConvert(maxStringVal)

            $("#inpcost").val(cost[0])
            $("#inpmod").val(cost[1])

            $("#inpMaxcost").val(maxcost[0])
            $("#maxmod").val(maxcost[1])

        }

        function costModConvert(stringVal) {
            lastChar = stringVal.slice(stringVal.length - 1)
            if ($.isNumeric(lastChar)) {
                return [stringVal, ""]
            } else {
                return [stringVal.slice(0, stringVal.length - 1), lastChar]
            }
        }

        function getOneHourMaxToken(cpmo) {
            return cpmo * 40
        }



        // respond to Clicks
        $("#getres").click(function (e) {
            cost = $("#inpcost").val()
            mod = $("#inpmod").val()
            mcost = $("#inpMaxcost").val()
            mmod = $("#maxmod").val()
            openCount = $("#opensCount").val()
            invSpace = $("#invSpace").val()
            fuseSell = $("#inputGroupSelect01").val()   // 1 = fuse | 2 = Sell
            gPass = $("#inputGroupSelect02").val()      // 1 = None | 2 = Owned
            fiftyk = $("#inputGroupSelect03").val()     // 1 = None | 2 = Owned
            doMax = $("#inputGroupSelect04").val()      // 1 = Yes  | 2 = No
            vip = $("#inputGroupSelect05").val()      // 1 = No  | 2 = Yes

            res = getCostOfHourOpens(cost, openCount, gPass, fiftyk, fuseSell, vip)
            if (doMax == 1) {
                res += getCostOfHourMaxOpen(cost, invSpace, fuseSell)
            }

            mres = getOneHourMaxToken(mcost)


            hour1 = convertToFormatted(res, mod)
            hour2 = convertToFormatted(res * 2, mod)
            hour3 = convertToFormatted(res * 3, mod)
            hour4 = convertToFormatted(res * 4, mod)
            hour5 = convertToFormatted(res * 5, mod)
            hour6 = convertToFormatted(res * 6, mod)
            hour7 = convertToFormatted(res * 7, mod)
            hour8 = convertToFormatted(res * 8, mod)

            hourM1 = convertToFormatted(mres, mmod)
            hourM2 = convertToFormatted(mres * 2, mmod)
            hourM3 = convertToFormatted(mres * 3, mmod)
            hourM4 = convertToFormatted(mres * 4, mmod)
            hourM5 = convertToFormatted(mres * 5, mmod)
            hourM6 = convertToFormatted(mres * 6, mmod)
            hourM7 = convertToFormatted(mres * 7, mmod)
            hourM8 = convertToFormatted(mres * 8, mmod)

            $("#resdisplay").html(hour1 + " for 1 hour (" + hourM1 + " tokens)")
            $("#res2display").html(hour2 + " for 2 hours (" + hourM2 + " tokens)")
            $("#res3display").html(hour3 + " for 3 hours (" + hourM3 + " tokens)")
            $("#res4display").html(hour4 + " for 4 hours (" + hourM4 + " tokens)")
            $("#resd5isplay").html(hour5 + " for 5 hours (" + hourM5 + " tokens)")
            $("#res6display").html(hour6 + " for 6 hours (" + hourM6 + " tokens)")
            $("#res7display").html(hour7 + " for 7 hours (" + hourM7 + " tokens)")
            $("#res8display").html(hour8 + " for 8 hours (" + hourM8 + " tokens)")
        });

        $(".trworld").click(function () {
            ffs = $(this)
            costtd = ffs.find("td.costtd").html()
            costMaxtd = ffs.find("td.costMaxtd").html()
            worldName = ffs.find("td.worldName").html()
            $("#info").html(worldName)
            populateCost(costtd, costMaxtd)
        });

    </script>
</body>

</html>