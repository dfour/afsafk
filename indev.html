<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="css/bootstrap.css">
    <link rel="stylesheet" href="css/afs.css">
    <link rel="icon" type="image/x-icon" href="images/favicon.png">
    <script src="js/jquery-3.6.0.min.js"></script>
    <script src="js/popper.min.js"></script>
    <script src="js/bootstrap.js"></script>
    <script src="js/afsutils.js"></script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-79653090-2"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'UA-79653090-2');
    </script>
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <a class="navbar-brand" href="#">AFS Utils</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item">
                    <a class="nav-link" href="index.html">AFK Calc</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="afsdmg.html">Damage Calc</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="info.html">Information</a>
                </li>
            </ul>
        </div>
    </nav>
    <div class="container-fluid" style="margin-top: 25px;">
        <div class="row justify-content-md-center">
            <img src="images/afs-logo.png" width="300px"><img src="images/acc-logo.png"
                style=" width:100%; max-width: 926px;">&nbsp;&nbsp;&nbsp;&nbsp; by
            d_four
        </div>
        <hr>
        <div class="row justify-content-center">
            <div class="col-sm-12 col-md-6 col-lg-4">
                <!-- Left -->
                <div class="card" style="min-height:175px">
                    <div class="card-body">
                        <h5 class="card-title">STEP 1</h5>
                        <p class="card-text">Click on a world below to set the Prices</p>
                        <div class="text-center">
                            <p class="h4"> <span id="spyworld">WORLD</span></p>
                        </div>
                        <div class="row justify-content-md-center costspy">
                            <div class="col-3">&yen; Cost: <span id="spyyen">---</span></div>
                            <div class="col-3">&star; Cost: <span id="spytoken">---</span></div>
                            <div class="col-6"><small><span id="divines">divine 1,divine 2</span></small></div>
                        </div>
                    </div>
                </div>
                <div style="height: 10px;">&nbsp;</div>
                <div>
                    <div class="text-center worldbar">
                        <div id="wb">new world data goes hither </div>
                    </div>
                </div>
                <div style="height: 10px;">&nbsp;</div>
            </div>
            <div class="col-sm-12 col-md-6 col-lg-2">
                <!-- Badge Row-->
                <div class="card" style="min-height:175px">
                    <div class="card-body">
                        <h5 class="card-title">STEP 2</h5>
                        <p class="card-text">Select game passes &amp; events</p>
                    </div>
                </div>
                <div style="height: 10px;">&nbsp;</div>
                <div class="badgebar">
                    <div class="row justify-content-center">
                        <div class="img-txt-container badgeBut" info="test1" data-toggle="tooltip" data-placement="top"
                            title="Do you have the VIP game pass?">
                            <img src="https://tr.rbxcdn.com/ead398a1f02f246c28c9418273773058/150/150/Image/Png"
                                width="75px" alt="VIP">
                            <img class="clh" style="position:absolute;left: 0;top: 0;" src="images/greensorcle.png"
                                width="75px">
                            <div class="img-txt-centered">VIP</div>
                        </div>
                        <div class="img-txt-container badgeBut" info="test2" data-toggle="tooltip" data-placement="top"
                            title="Do You have the Fast Open game pass?"><img
                                src="https://tr.rbxcdn.com/34b8d7ff33e2aa812f46b0822a5b955b/150/150/Image/Png"
                                width="75px" alt="Fast Open">
                            <img class="clh" style="position:absolute;left: 0;top: 0;" src="images/greensorcle.png"
                                width="75px">
                            <div class="img-txt-centered">Fast Open</div>
                        </div>
                        <div class="img-txt-container badgeBut" info="test3" data-toggle="tooltip" data-placement="top"
                            title="Have you already opened 50k stars from this world?"><img
                                src="https://tr.rbxcdn.com/34b8d7ff33e2aa812f46b0822a5b955b/150/150/Image/Png"
                                width="75px" alt="50k badge">
                            <img class="clh" style="position:absolute;left: 0;top: 0;" src="images/greensorcle.png"
                                width="75px">
                            <div class="img-txt-centered">50k</div>
                        </div>
                        <div class="img-txt-container badgeBut" info="test4" data-toggle="tooltip" data-placement="top"
                            title="Do you own the Half Max open cooldown Game pass? "><img
                                src="https://tr.rbxcdn.com/3a58834ce149e291a0a543e70cde2e6f/150/150/Image/Png"
                                width="75px" alt="Fast Max">
                            <img class="clh" style="position:absolute;left: 0;top: 0;" src="images/greensorcle.png"
                                width="75px">
                            <div class="img-txt-centered">2x Max</div>
                        </div>
                    </div>
                    <div class="row justify-content-center">
                        <div class="img-txt-container badgeBut" info="test7" data-toggle="tooltip" data-placement="top"
                            title="Is it a 2x Time Event?"><img src="images/afstimeventicon.png" width="75px">
                            <img class="clh timeMod" style="position:absolute;left: 0;top: 0; display: none;"
                                src="images/greensorcle.png" width="75px">
                            <div class="img-txt-centered">Event x2</div>
                        </div>
                        <div class="img-txt-container badgeBut" info="test8" data-toggle="tooltip" data-placement="top"
                            title="Is it a 3x Time Event?"><img src="images/afstimeventicon.png" width="75px">
                            <img class="clh timeMod" style="position:absolute;left: 0;top: 0; display: none;"
                                src="images/greensorcle.png" width="75px">
                            <div class="img-txt-centered">Event x3</div>
                        </div>
                        <div class="img-txt-container badgeBut" info="test9" data-toggle="tooltip" data-placement="top"
                            title="Is it a 4x Time Event?"><img src="images/afstimeventicon.png" width="75px">
                            <img class="clh timeMod" style="position:absolute;left: 0;top: 0; display: none;"
                                src="images/greensorcle.png" width="75px">
                            <div class="img-txt-centered">Event x4</div>
                        </div>
                        <div class="img-txt-container badgeBut" info="test10" data-toggle="tooltip" data-placement="top"
                            title="Is it a 5x Time Event?"><img src="images/afstimeventicon.png" width="75px">
                            <img class="clh timeMod" style="position:absolute;left: 0;top: 0; display: none;"
                                src="images/greensorcle.png" width="75px">
                            <div class="img-txt-centered">Event x5</div>
                        </div>
                    </div>
                </div>
                <div style="height: 10px;">&nbsp;</div>
            </div>
            <div class="col-sm-12 col-md-12 col-lg-6">
                <!-- Main Area -->
                <div class="row">
                    <!-- Top Bar -->
                </div>
                <div class="row">
                    <!-- Mid Bar -->
                    <div class="col-sm-5">
                        <!-- toggle area -->
                        <div class="card" style="min-height:175px">
                            <div class="card-body">
                                <h5 class="card-title">STEP 3</h5>
                                <p class="card-text">Additional options; Inventory, Star opens, Time lords etc.</p>
                            </div>
                        </div>
                        <div style="height: 10px;">&nbsp;</div>
                        <!-- Yen Cost Input -->
                        <div class="input-group  mb-3" data-toggle="tooltip" data-placement="top"
                            title="Cost per Star without VIP bonus. Click the world &leftarrow; to get all values.">
                            <div class="input-group-prepend">
                                <span class="input-group-text  bg-info text-white">&#165;
                                    Cost</span>
                            </div>
                            <input id="inpcost" type="text" aria-label="cost" class="form-control" placeholder="100">
                            <input id="inpmod" type="text" aria-label="mod" class="form-control" placeholder="T"
                                style="max-width: 50px;">
                        </div>
                        <!-- Max open Cost Input -->
                        <div class="input-group  mb-3" data-toggle="tooltip" data-placement="top"
                            title="Cost in tokens for a single Max Open.">
                            <div class="input-group-prepend">
                                <span class="input-group-text  bg-info text-white"> &star; Max Token</span>
                            </div>
                            <input id="inpMaxcost" type="text" aria-label="maxcost" class="form-control"
                                placeholder="10">
                            <input id="maxmod" type="text" aria-label="maxmod" class="form-control" placeholder="B"
                                style="max-width: 50px;">
                        </div>
                        <!-- Open star count selector -->
                        <div class="input-group  mb-3" data-toggle="tooltip" data-placement="top"
                            title="How Many stars you can open at once.">
                            <div class="input-group-prepend">
                                <span class="input-group-text bg-info text-white">&#x272D; Opens</span>
                            </div>
                            <button class="btn btn-outline-info stobtnmin" type="button">&minus;</button>
                            <input type="text" class="form-control" id="stoCount" value="8">
                            <button class="btn btn-outline-info stobtnplu" type="button">&plus;</button>
                        </div>
                        <!-- Inventory Size Input -->
                        <div class="input-group  mb-3" data-toggle="tooltip" data-placement="top"
                            title="Amount of space in your inventory.">
                            <div class="input-group-prepend">
                                <span class="input-group-text  bg-info text-white">&#8862; Inv Space</span>
                            </div>
                            <button class="btn btn-outline-info invbtnmin" type="button">&minus;</button>
                            <input type="text" class="form-control" id="invSpace" value="2000">
                            <button class="btn btn-outline-info invbtnplu" type="button">&plus;</button>
                        </div>
                        <!-- Fuse or Sell Selector -->
                        <div data-toggle="tooltip" data-placement="top"
                            title="Are you fusing or selling the stars you get?" class="input-group  mb-3">
                            <button class="btn btn-outline-info" type="button"
                                onclick="$('#staruse').val('Fuse')">&#x26AD; Fuse</button>
                            <input type="text" class="form-control" id="staruse" value="Fuse">
                            <button class="btn btn-outline-info" type="button"
                                onclick="$('#staruse').val('Sell')">&#x24; Sell</button>
                        </div>
                        <!-- Fast Open Game Pass Selector -->
                        <div class="input-group mb-3 d-none">
                            <div class="input-group-prepend">
                                <label class="input-group-text  bg-info text-white" for="inputGroupSelect02">Fast
                                    Open</label>
                            </div>
                            <select class="custom-select" id="inputGroupSelect02">
                                <option value="1">None</option>
                                <option selected value="2">Owned</option>
                            </select>
                        </div>
                        <!-- World 50K Badge selector -->
                        <div class="input-group mb-3 d-none">
                            <div class="input-group-prepend">
                                <label class="input-group-text  bg-info text-white" for="inputGroupSelect03">50k
                                    Badge</label>
                            </div>
                            <select class="custom-select" id="inputGroupSelect03">
                                <option value="1">None</option>
                                <option selected value="2">Owned</option>
                            </select>
                        </div>
                        <!-- VIP Pass Selector -->
                        <div class="input-group mb-3 d-none">
                            <div class="input-group-prepend">
                                <label class="input-group-text  bg-info text-white" for="inputGroupSelect05">VIP
                                    Pass</label>
                            </div>
                            <select class="custom-select" id="inputGroupSelect05">
                                <option value="1">None</option>
                                <option selected value="2">Owned</option>
                            </select>
                        </div>
                        <!-- Max Open Calc Selector -->
                        <div class="input-group mb-3" data-toggle="tooltip" data-placement="top"
                            title="Are you Max opening?">
                            <div class="input-group-prepend">
                                <label class="input-group-text  bg-info text-white" for="inputGroupSelect04">&star; Max
                                    Open</label>
                            </div>
                            <select class="custom-select" id="inputGroupSelect04">
                                <option selected value="1">Yes</option>
                                <option value="2">No</option>
                            </select>
                        </div>
                        <!-- TimeLord count -->
                        <div class="input-group  mb-3" data-toggle="tooltip" data-placement="top"
                            title="Enter the amount of TimeLord Passives you have">
                            <div class="input-group-prepend">
                                <span class="input-group-text  bg-info text-white">&#10710; Time Lords</span>
                            </div>
                            <button class="btn btn-outline-info tlbtnmin" type="button">&minus;</button>
                            <input type="text" class="form-control" id="tlcount" value="0">
                            <button class="btn btn-outline-info tlbtnplu" type="button">&plus;</button>
                        </div>
                        <button id="getres" type="button" class="btn btn-info btn-block">Get Result</button>
                    </div>
                    <div class="col-sm-7">
                        <!-- Result Area-->
                        <div class="card" style="min-height:175px">
                            <div class="card-body">
                                <h5 class="card-title">STEP 4</h5>
                                <p class="card-text">See all the results for you</p>
                            </div>
                        </div>
                        <div style="height: 10px;">&nbsp;</div>
                        <div id="tableres" class="table-wrapper-scroll-y my-custom-scrollbar"></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row justify-content-center">
            <!-- Bot Bar -->
            <div class="col-12">Values shown are just estimates and do not account for variations due to connection
                speed or computer performance.</div>
            <div class="col-12">Special thanks to <a href="https://www.twitch.tv/omkabo">@OmKaBo</a> for suggestions and
                feedback.
            </div>
            <div class="col-12">
                <span class="small">Version 1.6.5 - Updated 11.06.2022 - <a href="indev.html"> Dev Version</a></span>
            </div>
            <div class="col-12"><a href="https://github.com/dfour/afsafk">Source Code</a></div>
            <div class="col-12">&there4; &nbsp; &sup;_&fnof;&deg;&micro;&and;</div>
        </div>
    </div>
    <script>
        /** 
        * v1.7
        *  moving function to own js module
        *   anauto making worlds based on js object
        **/
        // Control and calculate results here

        // vars
        timeEventMod = 1            // stores modifier for time event
        timeLordsMod = 0            // for time lord multiplier
        maxOpenPass = true            // max open pass (1 for normal, 2 for own)
        wname = "Pick A world!"
        yen = "0"
        mtoken = "0"
        dv1 = ""
        dv2 = ""

        // update cost input fields
        function populateCost(stringVal, maxStringVal) {
            if (stringVal === undefined || maxStringVal === undefined) {
                return;
            }
            cost = cmc(stringVal)
            maxcost = cmc(maxStringVal)
            $("#inpcost").val(cost[0])
            $("#inpmod").val(cost[1])
            $("#inpMaxcost").val(maxcost[0])
            $("#maxmod").val(maxcost[1])
        }

        // create html table with results
        function getTableResult(title, cost, maxCost, mod, mmod, tot) {
            table = "<table class='table table-sm'><tr><th class='text-center' colspan='4'>" + title + "</th></tr>"
            table += "<tr><td colspan='4'>" + timeBetweenMO(maxOpenPass, timeEventMod, timeLordsMod) + " seconds per Max Open</td></tr>"
            table += "<tr><th>Time</th><th>&yen;en</th><th>&star;Tokens</th><th>&#x272D;Opens</th></tr>"
            for (let index = 1; index <= 24; index++) {
                table += "<tr><td>" + index + " hour" + (index > 1 ? "s" : "") + "</td><td>" +
                    ctf(cost * index, mod) + "</td><td>" +
                    ctf(maxCost * index, mmod) + "</td><td>" +
                    ctf(tot * index, "") + "</td></tr>"
            }
            table += "</tabl>"
            return table
        }

        //
        function setDivines(d1, d2) {
            if ((d1 === undefined) || (d2 === undefined)) {
                return
            }
            $("#divines").html(d1 + " &amp; " + d2)
        }

        // respond to Clicks
        $(document).on("click", "#getres", function () {
            //$("#getres").click(function (e) { 
            cost = $("#inpcost").val()
            mod = $("#inpmod").val()
            mcost = $("#inpMaxcost").val()
            mmod = $("#maxmod").val()
            openCount = parseInt($("#stoCount").val())
            invSpace = $("#invSpace").val()
            doFuse = $("#staruse").val() == "Fuse"      // 1 = fuse | 2 = Sell
            gPass = $("#inputGroupSelect02").val() == 2     // 1 = None | 2 = Owned
            fiftyk = $("#inputGroupSelect03").val() == 2    // 1 = None | 2 = Owned
            doMax = $("#inputGroupSelect04").val() == 1     // 1 = Yes  | 2 = No
            vip = $("#inputGroupSelect05").val() == 2      // 1 = No   | 2 = Yes
            timeLordsMod = parseInt($("#tlcount").val()) * 0.25

            res = getCostOfHourOpens(cost, openCount, gPass, fiftyk, doFuse, vip)
            totOpens = getHourOpens(openCount, gPass, fiftyk)
            mres = 0
            if (doMax) {
                res += getCostOfHourMaxOpen(cost, invSpace, doFuse, vip, maxOpenPass, timeEventMod, timeLordsMod)
                totOpens += getHourMaxOpen(invSpace, maxOpenPass, timeEventMod, timeLordsMod)
                mres = getOneHourMaxToken(mcost, maxOpenPass, timeEventMod, timeLordsMod)
            }

            $("#tableres").html(getTableResult(wname, res, mres, mod, mmod, totOpens))
        });



        $(document).on("mouseenter", ".imgsel", function () {
            twrld = $(this).data("world")
            tyen = $(this).data("yen")
            tmtokem = $(this).data("token")
            tdv1 = $(this).data("dv1")
            tdv2 = $(this).data("dv2")
            setDivines(tdv1, tdv2)
            $("#spyworld").html(twrld)
            $("#spyyen").html(tyen)
            $("#spytoken").html(tmtokem)
        });

        $(document).on("mouseleave", ".imgsel", function () {
            $("#spyworld").html(wname)
            $("#spyyen").html(yen)
            $("#spytoken").html(mtoken)
            setDivines(dv1, dv2)
        });


        $(document).on("click", ".imgsel", function () {
            turnOffAllWorldSelectHighlights($(this))
            wname = $(this).data("world")
            yen = $(this).data("yen")
            mtoken = $(this).data("token")
            dv1 = $(this).data("dv1")
            dv2 = $(this).data("dv2")
            setDivines(dv1, dv2)
            $(this).find(".clh").toggle()
            populateCost(yen, mtoken)
        });

        $(document).on("click", ".trworld", function () {
            ffs = $(this)
            costtd = ffs.find("td.costtd").html()
            costMaxtd = ffs.find("td.costMaxtd").html()
            wname = ffs.find("td.worldName").html()
            $("#info").html(wname)
            populateCost(costtd, costMaxtd)
        });

        $(document).on("click", ".invbtnmin", function () {
            oldv = $("#invSpace").val()
            newv = parseInt(oldv) - 25
            newv = newv < 0 ? 0 : newv
            $("#invSpace").val(newv)
        });

        $(document).on("click", ".invbtnplu", function () {
            oldv = $("#invSpace").val()
            newv = parseInt(oldv) + 25
            $("#invSpace").val(newv)
        });

        $(document).on("click", ".stobtnmin", function () {
            oldv = $("#stoCount").val()
            newv = parseInt(oldv) - 1
            newv = newv < 0 ? 0 : newv
            $("#stoCount").val(newv)
        });

        $(document).on("click", ".stobtnplu", function () {
            oldv = $("#stoCount").val()
            newv = parseInt(oldv) + 1
            $("#stoCount").val(newv)
        });

        $(document).on("click", ".tlbtnmin", function () {
            oldv = $("#tlcount").val()
            newv = parseInt(oldv) - 1
            newv = newv < 0 ? 0 : newv
            $("#tlcount").val(newv)
        });

        $(document).on("click", ".tlbtnplu", function () {
            oldv = $("#tlcount").val()
            newv = parseInt(oldv) + 1
            $("#tlcount").val(newv)
        });

        $(document).on("click", ".badgeBut", function () {
            switch ($(this).attr("info")) {
                case "test1":
                    if ($("#inputGroupSelect05").val() == "1") {
                        $("#inputGroupSelect05").val("2")
                    } else {
                        $("#inputGroupSelect05").val("1")
                    }
                    break;
                case "test2":

                    if ($("#inputGroupSelect02").val() == "1") {
                        $("#inputGroupSelect02").val("2")
                    } else {
                        $("#inputGroupSelect02").val("1")
                    }
                    break;
                case "test3":
                    if ($("#inputGroupSelect03").val() == "1") {
                        $("#inputGroupSelect03").val("2")
                    } else {
                        $("#inputGroupSelect03").val("1")
                    }
                    break;
                case "test4":
                    if (maxOpenPass) {
                        maxOpenPass = false
                    } else {
                        maxOpenPass = true
                    }
                    break;
                case "test7":
                    turnOffAllTimeEventHighlights($(this))
                    if (timeEventMod == 2) {
                        timeEventMod = 1
                        $(this).find(".clh").toggle()
                    } else {
                        timeEventMod = 2
                    }
                    break;
                case "test8":
                    turnOffAllTimeEventHighlights($(this))
                    if (timeEventMod == 3) {
                        timeEventMod = 1
                        $(this).find(".clh").toggle()
                    } else {
                        timeEventMod = 3
                    }
                    break;
                case "test9":
                    turnOffAllTimeEventHighlights($(this))
                    if (timeEventMod == 4) {
                        timeEventMod = 1
                        $(this).find(".clh").toggle()
                    } else {
                        timeEventMod = 4
                    }
                    break;
                case "test10":
                    turnOffAllTimeEventHighlights($(this))
                    if (timeEventMod == 5) {
                        timeEventMod = 1
                        $(this).find(".clh").toggle()
                    } else {
                        timeEventMod = 5
                    }
                    break;
            }
            $(this).find(".clh").toggle()
        });

        function turnOffAllWorldSelectHighlights(object) {
            badgebar = object.closest(".worldbar")
            badgebar.find(".worldsel").toggle(false)
        }

        function turnOffAllTimeEventHighlights(object) {
            badgebar = object.closest(".badgebar")
            badgebar.find(".timeMod").toggle(false)
        }

        function addWorldData() {
            worldString = ""
            const reversedKeys = Object.keys(worldData).reverse();
            reversedKeys.forEach(key => {
                worldString += '<div class="img-txt-container imgsel" data-toggle="tooltip" data-placement="top"'
                worldString += 'title="&yen;' + worldData[key].starCost + ' &star;' + worldData[key].maxopenCost + '" data-dv1="&#x2a;' + worldData[key].divine1 + 'Sensitive Slayer"'
                worldString += 'data-dv2="' + worldData[key].divine2 + ' &amp; Daireb" data-yen="' + worldData[key].starCost + '" data-token="' + worldData[key].maxopenCost + '"'
                worldString += 'data-world="' + worldData[key].name + '">'
                worldString += '<img src="' + worldData[key].worldImage + '" width="75px">'
                worldString += '<img class="clh worldsel" style="position:absolute;left: 0;top: 0; display: none;"'
                worldString += 'src="images/greensorcle.png" width="75px">'
                worldString += '</div>'
            })
            return worldString
        }

        $("#wb").html(addWorldData())

        // initial tooltips
        $('document').ready(function () {
            $('[data-toggle=tooltip]').tooltip();
        });
    </script>
</body>

</html>